{"version":3,"sources":["api/project.ts","api/user.ts","utils/reorder.ts","utils/use-optimistic-option.ts","utils/project.ts","components/id-select.tsx","screens/project-list/utils.ts","assets/software-logo.svg","screens/project-list/project-modal.tsx","components/project-popover.tsx","components/user-popover.tsx","authenticated-app/index.tsx"],"names":["useProjects","param","http","useHttp","useQuery","cleanObject","data","useEditProject","queryKey","useMutation","params","id","method","useEditConfig","useAddProject","useAddConfig","useDeleteProject","useDeleteConfig","useProject","enabled","useUser","reorder","fromId","type","referenceId","list","copiedList","movingItemIndex","findIndex","item","insertAfter","length","targetIndex","insertBefore","from","to","toItem","removedItem","splice","toIndex","indexOf","useConfig","callback","queryClient","useQueryClient","onSuccess","invalidateQueries","onMutate","target","a","previousItems","getQueryData","setQueryData","old","onError","error","newItem","ctx","filter","map","useReorderBoardConfig","useReorderTaskConfig","kanbanId","toKanbanId","useProjectModal","useUrlQueryParam","projectCreate","setProjectCreate","editProjectId","setEditProjectId","setUrlParams","useSetUrlQueryParam","Number","projectModalOpen","editingProject","isLoading","open","close","edit","IdSelect","props","value","onChange","defaultOptionName","options","resetProp","toNumber","undefined","Option","name","isNaN","useProjectsSearchParams","setParam","useMemo","personId","useProjectsQueryKey","_extends","Object","assign","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","x","y","width","height","xlinkHref","_ref3","SvgSoftwareLogo","_ref","svgRef","title","titleId","xmlns","xmlnsXlink","viewBox","ref","ForwardRef","formItemLayout","ProjectModal","users","useMutateProject","Form","useForm","form","mutateAsync","mutateLoading","useEffect","setFieldsValue","resetFields","forceRender","visible","onClose","Container","size","layout","onFinish","values","then","style","Item","label","rules","required","message","placeholder","BtnFormItem","htmlType","loading","disabled","styled","div","ProjectPopover","projects","refetch","Content","ContentContaier","Text","pin","Meta","onClick","placement","content","onVisibleChange","UserPopover","ContentContainer","user","ProjectList","React","lazy","ProjectScreen","Header","AuthenticatedApp","Main","path","element","PageHeader","between","HeaderLeft","gap","resetRoute","HeaderRight","User","useAuth","logout","overlay","Row","main"],"mappings":"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","file":"static/js/5.459ebf4b.chunk.js","sourcesContent":["import { useHttp } from \"plugins/request\";\nimport { cleanObject } from \"utils\";\nimport { useQuery, useMutation, QueryKey } from \"react-query\";\nimport {\n  useEditConfig,\n  useAddConfig,\n  useDeleteConfig,\n} from \"utils/use-optimistic-option\";\nimport { Project } from \"types/project\";\n\n/* project 列表 */\nexport const useProjects = (param?: Partial<Project>) => {\n  const http = useHttp();\n\n  return useQuery<Project[]>([\"projects\", cleanObject(param)], () =>\n    http(\"projects\", { data: param })\n  );\n  /* const { run, ...reslut } = useAsync<Project[]>();\n  const fetchProjects = useCallback(\n    () => http(\"projects\", { data: cleanObject(param || {}) }),\n    [http, param]\n  );\n\n  useEffect(() => {\n    run(fetchProjects(), { retry: fetchProjects });\n  }, [param, run, fetchProjects]);\n\n  return reslut; */\n};\n\n/* 更改项目信息 */\nexport const useEditProject = (queryKey: QueryKey) => {\n  const http = useHttp();\n\n  return useMutation(\n    (params: Partial<Project>) =>\n      http(`projects/${params.id}`, { data: params, method: \"PATCH\" }),\n    useEditConfig(queryKey)\n  );\n\n  /* const { run, ...asyncResult } = useAsync();\n  const mutate = (params: Partial<Project>) => {\n    return run(\n      http(`projects/${params.id}`, {\n        data: params,\n        method: \"PATCH\",\n      })\n    );\n  };\n\n  return {\n    mutate,\n    ...asyncResult,\n  }; */\n};\n\n/* 添加项目 */\nexport const useAddProject = (queryKey: QueryKey) => {\n  const http = useHttp();\n  return useMutation((params: Partial<Project>) => {\n    return http(\"projects\", { data: params, method: \"POST\" });\n  }, useAddConfig(queryKey));\n  /* const { run, ...asyncResult } = useAsync();\n  const mutate = (params: Partial<Project>) => {\n    return run(\n      http(`/projects/${params.id}`, {\n        data: params,\n        method: \"POST\",\n      })\n    );\n  };\n\n  return {\n    mutate,\n    ...asyncResult,\n  }; */\n};\n\n/* 删除项目 */\nexport const useDeleteProject = (queryKey: QueryKey) => {\n  const http = useHttp();\n  return useMutation(({ id }: { id: number }) => {\n    return http(`projects/${id}`, { method: \"DELETE\" });\n  }, useDeleteConfig(queryKey));\n};\n\n/* 查询project详情 */\nexport const useProject = (id?: number) => {\n  const http = useHttp();\n  return useQuery<Project>([\"project\", { id }], () => http(`projects/${id}`), {\n    enabled: !!id,\n  });\n};\n","import { useHttp } from \"plugins/request\";\nimport { useAsync } from \"utils/custom-hook\";\nimport { useEffect } from \"react\";\nimport { cleanObject } from \"utils\";\nimport { useQuery } from \"react-query\";\nimport { User } from \"types/user\";\n\n/* 获取负责人列表 */\nexport const useUser = (param?: Partial<User>) => {\n  const http = useHttp();\n  return useQuery<User[]>([\"users\", cleanObject(param)], () =>\n    http(\"users\", { data: cleanObject(param) })\n  );\n  /* const { run, ...result } = useAsync<User[]>();\n\n  useEffect(() => {\n    run(http(\"users\", { data: cleanObject(param) }));\n  }, [param, http, run]);\n\n  return result; */\n};\n","/**\n * 在本地对排序进行乐观更新\n * @param fromId 要排序的项目的id\n * @param type 'before' | 'after'\n * @param referenceId 参照id\n * @param list 要排序的列表, 比如tasks, kanbans\n */\nexport const reorder = ({\n  fromId,\n  type,\n  referenceId,\n  list,\n}: {\n  list: { id: number }[];\n  fromId: number;\n  type: \"after\" | \"before\";\n  referenceId: number;\n}) => {\n  const copiedList = [...list];\n  // 找到fromId对应项目的下标\n  const movingItemIndex = copiedList.findIndex((item) => item.id === fromId);\n  if (!referenceId) {\n    return insertAfter([...copiedList], movingItemIndex, copiedList.length - 1);\n  }\n  const targetIndex = copiedList.findIndex((item) => item.id === referenceId);\n  const insert = type === \"after\" ? insertAfter : insertBefore;\n  return insert([...copiedList], movingItemIndex, targetIndex);\n};\n\n/**\n * 在list中，把from放在to的前边\n * @param list\n * @param from\n * @param to\n */\nconst insertBefore = (list: unknown[], from: number, to: number) => {\n  const toItem = list[to];\n  const removedItem = list.splice(from, 1)[0];\n  const toIndex = list.indexOf(toItem);\n  list.splice(toIndex, 0, removedItem);\n  return list;\n};\n\n/**\n * 在list中，把from放在to的后面\n * @param list\n * @param from\n * @param to\n */\nconst insertAfter = (list: unknown[], from: number, to: number) => {\n  const toItem = list[to];\n  const removedItem = list.splice(from, 1)[0];\n  const toIndex = list.indexOf(toItem);\n  list.splice(toIndex + 1, 0, removedItem);\n  return list;\n};\n","import { useQueryClient, QueryKey } from \"react-query\";\nimport { Task } from \"types/task\";\nimport { reorder } from \"./reorder\";\n\n/* 乐观更新配置项 */\nexport const useConfig = (\n  queryKey: QueryKey,\n  callback: (target: any, old?: any[]) => any[]\n) => {\n  const queryClient = useQueryClient();\n  return {\n    onSuccess: () => queryClient.invalidateQueries(queryKey),\n    onMutate: async (target: any) => {\n      /* 获取缓存数据 */\n      const previousItems = queryClient.getQueryData(queryKey);\n      /* 设置修改后的数据 */\n      queryClient.setQueryData(queryKey, (old?: any[]) => {\n        return callback(target, old);\n      });\n\n      /* return 的值可以在 onError 第三个参数(context)取得 */\n      return { previousItems };\n    },\n    onError: (error: any, newItem: any, ctx: any) => {\n      queryClient.setQueryData(queryKey, ctx.previousItems);\n    },\n  };\n};\n\n/* delete：保留与target id 不同的值 */\nexport const useDeleteConfig = (queryKey: QueryKey) => {\n  return useConfig(queryKey, (target: any, old?: any[]) => {\n    return old?.filter((item) => item.id !== target.id) || [];\n  });\n};\n\n/* edit：覆盖id相同项 */\nexport const useEditConfig = (queryKey: QueryKey) => {\n  return useConfig(queryKey, (target: any, old?: any[]) => {\n    return (\n      old?.map((item) => {\n        if (item.id === target.id) return { ...item, ...target };\n        return item;\n      }) || []\n    );\n  });\n};\n\n/* add：添加项 */\nexport const useAddConfig = (queryKey: QueryKey) => {\n  return useConfig(queryKey, (target: any, old?: any[]) => {\n    return old ? [...old, target] : [];\n  });\n};\n\n/* reorder: 排序 */\nexport const useReorderConfig = (queryKey: QueryKey) => {\n  return useConfig(queryKey, (target: any, old?: any[]) => old || []);\n};\n\n/* 看板排序乐观更新 */\nexport const useReorderBoardConfig = (queryKey: QueryKey) =>\n  useConfig(queryKey, (target, old) => reorder({ list: old, ...target }));\n\n/* 任务排序 */\nexport const useReorderTaskConfig = (queryKey: QueryKey) =>\n  useConfig(queryKey, (target, old) => {\n    const orderedList = reorder({ list: old, ...target }) as Task[];\n    return orderedList.map((item) =>\n      item.id === target.fromId\n        ? { ...item, kanbanId: target.toKanbanId }\n        : item\n    );\n  });\n","import { useProject } from \"api/project\";\nimport { useSetUrlQueryParam, useUrlQueryParam } from \"./custom-hook\";\n\n/* Project state management */\nexport const useProjectModal = () => {\n  const [{ projectCreate }, setProjectCreate] = useUrlQueryParam([\n    \"projectCreate\",\n  ]);\n\n  const [{ editProjectId }, setEditProjectId] = useUrlQueryParam([\n    \"editProjectId\",\n  ]);\n\n  const setUrlParams = useSetUrlQueryParam();\n\n  const { data: editingProject, isLoading } = useProject(Number(editProjectId));\n\n  const open = () => setProjectCreate({ projectCreate: true });\n  const close = () => setUrlParams({ projectCreate: \"\", editProjectId: \"\" });\n  const edit = (id: number) => setEditProjectId({ editProjectId: id });\n\n  return {\n    projectModalOpen: projectCreate === \"true\" || !!editProjectId,\n    editingProject,\n    isLoading,\n    open,\n    close,\n    edit,\n  };\n};\n","import React from \"react\";\nimport { Select } from \"antd\";\nimport { Raw } from \"types\";\n\n/** https://react-typescript-cheatsheet.netlify.app/docs/advanced/patterns_by_usecase/#componentprops */\ntype SelectProps = React.ComponentProps<typeof Select>;\n\ninterface IdSelectProps\n  extends Omit<\n    SelectProps,\n    \"value\" | \"onChange\" | \"defaultOptionName\" | \"options\"\n  > {\n  value?: Raw | null | undefined;\n  onChange?: (value?: number) => void;\n  defaultOptionName?: string;\n  options?: { name: string; id: number }[];\n}\n\n/**\n * value 可传入多种类型\n * onChange 只会回调 number | undefined\n * 当 Number(value) === NaN 时, 代表选择默认选项\n * 选择默认选项时，onChage 会回调 undefined\n */\nexport const IdSelect = (props: IdSelectProps) => {\n  const { value, onChange, defaultOptionName, options, ...resetProp } = props;\n  return (\n    <Select\n      value={options?.length ? toNumber(value) : 0}\n      onChange={(value) => onChange && onChange(toNumber(value) || undefined)}\n      {...resetProp}\n    >\n      {defaultOptionName ? (\n        <Select.Option value={0}>{defaultOptionName}</Select.Option>\n      ) : null}\n      {options &&\n        options.map(({ id, name }) => (\n          <Select.Option value={id} key={id}>\n            {name}\n          </Select.Option>\n        ))}\n    </Select>\n  );\n};\n\nconst toNumber = (value: unknown) => (isNaN(Number(value)) ? 0 : Number(value));\n","import { useMemo } from \"react\";\nimport { useUrlQueryParam } from \"utils/custom-hook\";\n\nexport const useProjectsSearchParams = () => {\n  const [params, setParam] = useUrlQueryParam([\"name\", \"personId\"]);\n  return [\n    useMemo(\n      () => ({ ...params, personId: Number(params.personId) || undefined }),\n      [params]\n    ),\n    setParam,\n  ] as const;\n};\n\n/* 乐观更新 query key */\nexport const useProjectsQueryKey = () => {\n  const [searchParams] = useProjectsSearchParams();\n  return [\"projects\", searchParams];\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"image\", {\n  id: \"logo_2x\",\n  \"data-name\": \"logo@2x\",\n  x: 5,\n  y: 1,\n  width: 118,\n  height: 107,\n  xlinkHref: \"data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHYAAABrCAYAAACi73ZUAAAOoElEQVR4nO2dCZAU1RnH/z17sMu9y3K74LJcyyWSiFwKSGIRICExAlIqKqghcpQBgkmKEoJAUOSUowKIICmKIHcUEo4gQQIKUW6URSC4S2C51uXYXWZ2Xupr3k71zHvd0zPbc27/qv4cr4/3+vvmvX79TgXxQxMA2QCaZmZmNmrYsGFmSUlJLQBJXA4ADEAZAGdCQkKJ0+nMP336dH5ZWdkVAN8AOAOgNB4sEsuObQmgD4DHALQBkAMgWTgrMPK5cz8HsBvAYQCF4X6wykYNAF0BzANwjOe+UOsagE0ABgN4oLI7wEpSAIwE8CmAgjA5U09OACcBzAHwcPyYOLzUBzANwEUdI0eDqKjuW5mcUhGqARgP4EYUO9RXVFT3il2Thxaq0S4GcEliuFjR3wH8IloMGg214gkAJgOoLhwJEofDgcaNGyM9PR01a9ZEcnIyEhISwBiD0+lEcXExioqKkJeXh1u3bln9PLsATATwlXAkjETSsQ0BbAHwiHAkAJKSkpCTk4MePXqgU6dOyM7ORlZWFho2bKg61Ijr16/j0qVLOHPmDE6ePImDBw/i2LFjyM/PN7jKNM8D+IvVRjNLJBybCOBFAFO5cwMiLS0N7du3R9u2bdGlSxf07t0bmZmZliWOcvOhQ4ewc+dO5Obmqg4/ceKEcJ5J1gBYCOCAZQmMUrIAnA7mndmxY0f2zjvvsOvXr7Nws2PHDjZs2DBWtWpVIV0m9Xo8O7U1b9kJyCidO3dm27dvD8qVt2/fZuPGjWNTpkwRjgVDXl4eGzNmDEtMTBTSaULTBIvEAU8BuBOIIbp3784+/PDDoJ1QVlbGevXq5bnfoEGDWGlpqXBeMOTm5rJRo0ax9PR0Id1+9Ff+KooLpvp5WC/16NGD7du3r8LGd7lcLCkpyeveLVu2ZE6nUzg3WG7cuMHeeustlpycLDyHgY4AaBDrjv2jwQN6id5fixcvtszoxPr164V4+vfvL5xXUc6fP8/69esnxGWg76gXSrBWjDDN4MG8lJWVxU6dOmW5wYn33ntPiG/w4MGW5txyRo4cKcRloCu8YSammG/wQB5RUTl79mx29+5dwUhWMnPmTCHuJUuWhCSuvXv3qqWC7HklorbwerHi2JGSBxBE76Xjx48LhgkVy5Yt80rD5s2bQxpfAM6l/t+qghWjjCclCRdE79P9+/cLxgg1VMvu2bMnmzt3bljie+GFF4Rn19HBaHbqjwC4dBLuUd++fdmZM2cEI8Qrs2bNEmygo7WCRaOABJ3ECk6tjKxatUqwhY6eizbHLtJJqEeNGzdmN2/erJSOJSZPnizYRCJXNNWUR0kS6KWuXbuyy5cvCw9rhqKiIjZ16lT22muvsY8//jjc/lC5deuWJw0nTpwQjpvl3XffFWwjEVWmaglWDjOdJQnzUqNGjdTmvWCZM2eO1/0OHz4cVqcSDz30kCf+Vq1aVeh5RowYIdhIok8j7dhvJYnyErX+VISJEyd63a927drs6NGj1nnND5RLtfHTZ1pFHFtYWMjq1asn2EmiHwrWDhM/lyTGS2PHjhUeLFCOHDnCatWq5XXf1NRUtm3btlD40UNxcTF76aWXhGeiBpWKQj/MlJQU4d4+2hopx16QJMajIUOGWGZk6i7Lzs4W4gjVO7egoIC1bt1aiG/atGnCucFy4MAB4f4SvSxYPcSMlSTCowYNGrB79+5ZauwrV66wZs2aecUzdOhQ4TwrkH2eTJ8+3fJ4fIt5ib7n01PCQjKf9iBLiKqlS5cKD2EF+fn5rEqVKp54qBM9FFDHfqidSpw9e1awnURTw+XYFZLIPWrevHmFKhf+oE7u8ePHszfffFOtiISKTZs2sVdeeYWtXLkyZHEwnQ4KidoIXrCYbEmkXtqzZ4+QeBtjWrRoIdjRRzMDdaNDCDFmkNHR7t27o1cve1B8oMyZM8ffFd2EEIvZJ/k1qUpISFDfGTbBYWIERudQObWVJDKPRo8ebbu0AlDftMyuGm0RPGJAIEXxs0KIhhEjRghhNuZp06YNqlWrZnR+30CmwZh1bAKfsiClbt266NChg+yQjVlHOBx4+umnhXANyUY+EO4nhMj5CYAHpUcAPPPMM2rC/HHnzh0/Z4SeEEzCklJaGvhSFpMnTxbCfBglhFSQpZIy36MvvvjC78tl0qRJrE6dOupwkUgxYcIElpaWpn6fhupb++rVq6x3795q69uKFSuE4/6gmQ8yG2uUZaVj/yuJQBUNHfXH7t27va4ZOHCg5U2O/vBtvgvG6GYYPny4Vzzz5s0L6Pr58+cLNtZKUZQxiqLAn8zQQxZBucw0jFMPje91NMkqXMhywdatW0MS+4wZM4S4qLQyC7WmUe+VzNZc263KrX+Q3Nwjsx3fGzZsEK4dMGCAcJ7VyAZx07SMUCIbnbho0SLTMfbp00e4XqOg53T6slZyc1UZGRnqHBmz0Kw333tQD00g9wgEKk1843vjjTdC/mMi2rVrJ8S9Zs0a4TwZ9MOT2ZvrslU9PoclN/c4JVDefvtt4T7Ua2M1NIXDNx6qPIUL6tOluoQ2/pycHFOxHzp0SEi7RrSyXDPBS0FwTnJzVQsWLBASZYYPPvjAcw8aMW/V9EYtbrdbHcERSF0gFNCPP9DimH6UdevWFeytUZ+KOjWDPv0kN1YV7IRkYteuXSGbP6Nl9erVbMuWLUJ4OFm+fHnAU0o6deok2FujiYKnTPIib5vUnYFOs7ovXLggJMjGGvx0CpQA+MzIwbLZ1bTe0q+FUB/q16+Ppk1jdopn1FOvnuEkvCrUS8pF/aTD+LqPHnzbAbebcSqRkZEhhNlYR2pqqtl7UXPvf3wnUmubKDYDGChcpgP1RNB6SrQoFsnGOhITE9X1p65duxbIPf8HoDmAu9pAw9YlWzGj5b7e1m2EsBVzal1eFNfni1Pq9rulVk1C2/YNkJjogNvthsUlL+PpcFOprihq3y/h5uHxtLx9UJQ3+H9fWIyvTxX4uwVl0qFUKx5i5NS+A1pj9sKfoVr1++sSut0he58q9K7W9ExUeoeWo5pEUZCamogNa49h1IiNwjkayJ8LybHthEOclNQkzJjdD02bpuHcuetqoNkuoUDSrflbkYTbULFGK7eWJmHk8G7Ys/Ms1q89pmcWslu3RKP1hnr2boYmD9bG2dxrajlpE1mKikpwo85dvPhqZ2xcd9yo9MykIriREMx5MDsdSUkJtlOjBIdDQVFhCTLqVkONGilGiaruMBr55nK64XK5Q1H82gSJAkX1i+Iw9Alz8OYpKXbDQxSiwEyjkOpY3RqxTexSvi2YTZzh4D3yNnHoWLcQahPrKHaOjU/cho51uZj9Bo4yKCuWlbnVNnsDyqjl6Z7e8dJSl/q9ZH/GRg8JCQ44nWW4d083PxKlib4ds1rKysqQllgT7iZM/ZXYRJ56qbVwocoNlJa4jNJSmGi08e3+vRcw+Nn31ZvoN0vahJOqVZNwKe97fzEWUiG7ig+GsokfnnPwAeE28QNl568dfBlVm/iBxoJfIMeetZ0aV5A/rzv4RvZXKrs14giaIaA2KdJiCf+u7NaII/ZDM8XjM71tqMnzTwBw8gXrbSKDwjewp7WEv9FPAbVJfKl1rO6+L/T5+idFidxy1zZe9GbMyLEb+YQtTyf7ab0MSY6dYtxbbxMmPve/WcBH5f8od+xNAKeE0zif3K9d2d6NMAv8ZzDPp6t2WMxq4TQNs+xxvhGlQJsd5VzVNjZpHUubxBdJLwEwmzF1sSebyDCGBowbx7xE21OndWwJbzfWZZv9ro0IlA3X+Y94ifY/viMUFwina1gphNiEg3X+M9RHfJkgDwk+J9wAUAfAo8KlvBHSpSjqd61NeCBvDS3/hpFTxrd3va09KqsQ1aS2Rp31KVS+UhR0FEJtQgF9t/r5xJkLYJxvoMyx4E2MXYVQTguqV9vjZULOMgCv+i+G02SDJfRmAYwXQjTkAhhtV6RCyl5zTl0jcyok79hy8viK1o8JRziH6KCiWLP2m41AN8a8X5oiTr5CW7FwxCDHEpP4rv+6/JQxdTtKG2t5mTF1CRg/jOGVXSlGjqVyoJ8QqoF+Ko8whh3CEZtgoCw4lDG87/9aWvH9z0KoBjM1ILrBq0KoDwWKgrpCqE0gPMkYdvo//y7vwTPEKMeWQ1n+vBDqw+OMwe96Jja6TDHnVPCdQC2jCa8MG655lAmwjYrCmC3T+k5R2AiJLXU0PRRZoxZvuNCL1KPptmNN6UtFYdUl9tPR7wSPGKD3uSOjlBfJhhsXEv/k2348qSjh29U2xlhPY5H8f9KU8w8AI4VQi5mo84sS1Axgn9g500t5isKGS2xloKO0GVm4frbd+KgLowR59ATAtkkesjKpQFHYbxSFVZXYx0ALBcuHga4GCZLqeYCdq4ROXQCwdB2bGGhJJJxaTn8+6sIogV5KAtRa4GGJAeJJBdyhD0tsYELrBUsHiBVdNLSy2++pX0A44gcqz6n771FFwQAA6canRz27+c7JRxlTK5C644z0Oc2bcg1XwTSDlX1vU2hDRSHUJLV52f6IoqALgA58vV3dTuEIU8g/7Kkz5BBjaj9nBWe30fLvjxtNRA8EqztVe/EXflvhSIDQd1gmgMZ8jxhyfIqiRGxhKhdj6j41V/muChf1+suCgzZpnxDta24pVYBp1e8vbm2vUG6sdUYDGqIOapT4raLUmArMCqBlpTLpb0Z93VHN61A3O8W3itLll/frFZXdmYw3Nkgnv8UM1M93TlFU55I2KsoPut9//56RPHA86ybPoU/FtEPL+RVN+VMUdbjqNUVR+2vn3x8AR3+04uOqvoxTh17hDQw/5oPNwk5YvibcfO4Jr0UyPsWTNBtADq9N045PnXhFONa4w1cGoJGi/+KjPIP4jLWOsH4mMiFE5TTXEr4oNm0u375mzZrNWrRo8YDL5arHGEvhdTJHBJbipRKmPCfSVNPilJSU25cvX86/ePEidWId571e0bPcA4D/AyVguurnueaKAAAAAElFTkSuQmCC\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"image\", {\n  id: \"software\",\n  x: 151,\n  y: 12,\n  width: 466,\n  height: 76,\n  xlinkHref: \"data:img/png;base64,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\"\n});\n\nfunction SvgSoftwareLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 632,\n    height: 108,\n    viewBox: \"0 0 632 108\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSoftwareLogo);\nexport default __webpack_public_path__ + \"static/media/software-logo.d54d7b80.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect } from \"react\";\nimport { Drawer, Spin, Form, Input, Button } from \"antd\";\nimport { useProjectModal } from \"utils/project\";\nimport { IdSelect } from \"components/id-select\";\nimport { useUser } from \"api/user\";\nimport { useAddProject, useEditProject } from \"api/project\";\nimport { ErrorBox } from \"components/lib\";\nimport styled from \"@emotion/styled\";\nimport { useProjectsQueryKey } from \"./utils\";\n\nconst formItemLayout = {\n  // labelCol: { span: 6 },\n  // wrapperCol: { span: 14 },\n};\n\nexport const ProjectModal = () => {\n  const { data: users } = useUser();\n  const { projectModalOpen, editingProject, isLoading, close } =\n    useProjectModal();\n  const useMutateProject = editingProject ? useEditProject : useAddProject;\n\n  const [form] = Form.useForm();\n  const {\n    mutateAsync,\n    error,\n    isLoading: mutateLoading,\n  } = useMutateProject(useProjectsQueryKey());\n  const onFinish = (values: {\n    name: string;\n    organization: string;\n    personId: number;\n  }) => {\n    /* 传入old and new data，新数据覆盖旧数据 */\n    mutateAsync({ ...editingProject, ...values }).then(() => {\n      form.resetFields();\n      close();\n    });\n  };\n\n  /* 设置默认值 (只有在编辑时), 卸载组件则重置表单 */\n  useEffect(() => {\n    form.setFieldsValue(editingProject);\n    return form.resetFields;\n  }, [editingProject, form]);\n\n  const title = editingProject ? \"编辑项目\" : \"创建项目\";\n\n  return (\n    <Drawer forceRender visible={projectModalOpen} onClose={close} width=\"100%\">\n      <Container>\n        {isLoading ? (\n          <Spin size={\"large\"} />\n        ) : (\n          <>\n            <h1>{title}</h1>\n            {error ? <ErrorBox error={error} /> : null}\n            <Form\n              form={form}\n              layout={\"vertical\"}\n              onFinish={onFinish}\n              style={{ width: \"40rem\" }}\n            >\n              <Form.Item\n                label={\"名称\"}\n                name={\"name\"}\n                rules={[{ required: true, message: \"请输入项目名称\" }]}\n                {...formItemLayout}\n              >\n                <Input placeholder={\"请输入项目名称\"} />\n              </Form.Item>\n\n              <Form.Item\n                label={\"部门\"}\n                name={\"organization\"}\n                rules={[{ required: true, message: \"请输入部门名称\" }]}\n                {...formItemLayout}\n              >\n                <Input placeholder={\"请输入部门名称\"} />\n              </Form.Item>\n\n              <Form.Item label={\"负责人\"} name={\"personId\"} {...formItemLayout}>\n                <IdSelect defaultOptionName={\"负责人\"} options={users || []} />\n              </Form.Item>\n\n              <BtnFormItem>\n                <Button\n                  type=\"primary\"\n                  htmlType=\"submit\"\n                  loading={mutateLoading}\n                  disabled={mutateLoading}\n                >\n                  提交\n                </Button>\n              </BtnFormItem>\n            </Form>\n          </>\n        )}\n      </Container>\n    </Drawer>\n  );\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  height: 80vh;\n`;\n\nconst BtnFormItem = styled(Form.Item)`\n  text-align: right;\n`;\n","import React from \"react\";\nimport { Popover, Typography, List, Divider } from \"antd\";\nimport { useProjects } from \"api/project\";\nimport styled from \"@emotion/styled\";\nimport { ButtonNoPadding } from \"./lib\";\nimport { useProjectModal } from \"utils/project\";\n\n/**\n * header \"项目\" pop over\n */\nexport const ProjectPopover = () => {\n  const { data: projects, refetch } = useProjects();\n  const { open } = useProjectModal();\n\n  const Content = (\n    <ContentContaier>\n      <Typography.Text type={\"secondary\"}>收藏项目</Typography.Text>\n      <List>\n        {projects\n          ?.filter((item) => item.pin)\n          .map((item) => (\n            <List.Item key={item.id}>\n              <List.Item.Meta title={item.name} />\n            </List.Item>\n          ))}\n      </List>\n      <Divider />\n      <ButtonNoPadding type={\"link\"} onClick={open}>\n        创建项目\n      </ButtonNoPadding>\n    </ContentContaier>\n  );\n\n  return (\n    <Popover\n      placement={\"bottom\"}\n      content={Content}\n      onVisibleChange={() => refetch}\n    >\n      <span>项目</span>\n    </Popover>\n  );\n};\n\nconst ContentContaier = styled.div`\n  min-width: 24rem;\n`;\n","import React from \"react\";\nimport { Divider, List, Popover, Typography } from \"antd\";\nimport styled from \"@emotion/styled\";\nimport { useUser } from \"api/user\";\n\nexport const UserPopover = () => {\n  const { data: users, refetch } = useUser();\n\n  const content = (\n    <ContentContainer>\n      <Typography.Text type={\"secondary\"}>组员列表</Typography.Text>\n      <List>\n        {users?.map((user) => (\n          <List.Item key={user.id}>\n            <List.Item.Meta title={user.name} />\n          </List.Item>\n        ))}\n      </List>\n    </ContentContainer>\n  );\n\n  return (\n    <Popover\n      onVisibleChange={() => refetch()}\n      placement={\"bottom\"}\n      content={content}\n    >\n      <span>组员</span>\n    </Popover>\n  );\n};\n\nconst ContentContainer = styled.div`\n  min-width: 30rem;\n`;\n","import React, { useState } from \"react\";\nimport { ButtonNoPadding, Row } from \"components/lib\";\nimport { useAuth } from \"context/auth-context\";\nimport { Button, Dropdown, Menu } from \"antd\";\nimport styled from \"@emotion/styled\";\nimport { ReactComponent as SoftwareLogo } from \"assets/software-logo.svg\";\nimport { Navigate, Routes, Route } from \"react-router\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { resetRoute } from \"utils\";\nimport { ProjectModal } from \"screens/project-list/project-modal\";\nimport { ProjectPopover } from \"components/project-popover\";\nimport { UserPopover } from \"components/user-popover\";\n\nconst ProjectList = React.lazy(() => import(\"screens/project-list\"));\nconst ProjectScreen = React.lazy(() => import(\"screens/project\"));\n\nconst AuthenticatedApp = () => {\n  return (\n    <Container>\n      <Router>\n        <Header />\n        <Main>\n          <Routes>\n            <Navigate to={\"/projects\"} />\n            <Route path={\"/projects\"} element={<ProjectList />} />\n            <Route path={\"/projects/:id/*\"} element={<ProjectScreen />} />\n          </Routes>\n        </Main>\n        <ProjectModal />\n      </Router>\n    </Container>\n  );\n};\n\nexport default AuthenticatedApp;\n\nconst Header = () => {\n  return (\n    <PageHeader between={true}>\n      <HeaderLeft gap={true}>\n        <ButtonNoPadding type=\"link\" onClick={resetRoute}>\n          <SoftwareLogo width=\"15rem\" height={\"100%\"} />\n        </ButtonNoPadding>\n        <ProjectPopover />\n        <UserPopover />\n      </HeaderLeft>\n      <HeaderRight>\n        <User />\n      </HeaderRight>\n    </PageHeader>\n  );\n};\n\nconst User = () => {\n  const { user, logout } = useAuth();\n\n  return (\n    <Dropdown\n      overlay={\n        <Menu>\n          <Menu.Item key=\"logout\">\n            <Button type=\"link\" onClick={() => logout()}>\n              登出\n            </Button>\n          </Menu.Item>\n        </Menu>\n      }\n    >\n      <Button type=\"link\">Hi, {user?.name}</Button>\n    </Dropdown>\n  );\n};\n\nconst Container = styled.div`\n  display: grid;\n  grid-template-rows: 6rem calc(100vh - 6rem);\n  height: 100%;\n`;\n\nconst PageHeader = styled(Row)`\n  z-index: 1;\n  padding: 3.2rem;\n  height: 6rem;\n  background-color: white;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);\n`;\n\nconst HeaderLeft = styled(Row)``;\n\nconst HeaderRight = styled.div``;\n\nconst Main = styled.main`\n  height: calc(100vh - 6rem);\n  display: flex;\n  overflow: hidden;\n`;\n"],"sourceRoot":""}