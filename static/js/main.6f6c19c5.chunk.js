(this.webpackJsonpjira=this.webpackJsonpjira||[]).push([[1],{144:function(t,n,e){"use strict";e.d(n,"d",(function(){return i})),e.d(n,"b",(function(){return s})),e.d(n,"a",(function(){return l})),e.d(n,"c",(function(){return b})),e.d(n,"f",(function(){return j})),e.d(n,"e",(function(){return O}));var r=e(35),c=(e(47),e(28)),u=e(0),a=e(145),o=e(163),i=function(t){Object(u.useEffect)((function(){t()}),[])},s=function(t,n){var e=Object(u.useState)(t),r=Object(c.a)(e,2),a=r[0],o=r[1];return Object(u.useEffect)((function(){var e=setTimeout((function(){return o(t)}),n);return function(){return clearTimeout(e)}}),[t,n]),a},f={stat:"idle",data:null,error:null},d={throwOnError:!1},l=function(t,n){var e=Object(r.a)(Object(r.a)({},d),n),a=Object(u.useReducer)((function(t,n){return Object(r.a)(Object(r.a)({},t),n)}),Object(r.a)(Object(r.a)({},f),t)),o=Object(c.a)(a,2),i=o[0],s=function(t){var n=p();return Object(u.useCallback)((function(){return n.current?t.apply(void 0,arguments):void 0}),[t,n])}(o[1]),l=Object(u.useState)((function(){return function(){}})),b=Object(c.a)(l,2),j=b[0],O=b[1],h=Object(u.useCallback)((function(t){return s({data:t,stat:"success",error:null})}),[s]),v=Object(u.useCallback)((function(t){return s({data:null,stat:"error",error:t})}),[s]),m=Object(u.useCallback)((function(t,n){if(!t||!t.then)throw new Error("\u8bf7\u4f20\u5165 Promise");return O((function(){return function(){(null===n||void 0===n?void 0:n.retry)&&m(n.retry(),n)}})),s({stat:"loading"}),t.then((function(t){return h(t),Promise.resolve(t)})).catch((function(t){return v(t),e.throwOnError?Promise.reject(t):t}))}),[e.throwOnError,h,v,s]);return Object(r.a)({isIdle:"idle"===i.stat,isLoading:"loading"===i.stat,isError:"error"===i.stat,isSuccess:"success"===i.stat,run:m,retry:j,setData:h,setError:v},i)},b=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=Object(u.useRef)(document.title).current;Object(u.useEffect)((function(){document.title=t}),[t]),Object(u.useEffect)((function(){return function(){n||(document.title=e)}}),[e,n])},j=function(t){var n=Object(a.c)(),e=Object(c.a)(n,1)[0],r=O(),o=Object(u.useState)(t),i=Object(c.a)(o,1)[0];return[Object(u.useMemo)((function(){var t=Object.entries(Object.fromEntries(e)).filter((function(t){var n=Object(c.a)(t,1)[0];return i.includes(n)}));return Object.fromEntries(t)}),[e,i]),function(t){return r(t)}]},O=function(){var t=Object(a.c)(),n=Object(c.a)(t,2),e=n[0],u=n[1];return function(t){var n=Object(o.a)(Object(r.a)(Object(r.a)({},Object.fromEntries(e)),t));return u(n)}},p=function(){var t=Object(u.useRef)(!1);return Object(u.useEffect)((function(){return t.current=!0,function(){t.current=!1}})),t}},163:function(t,n,e){"use strict";e.d(n,"a",(function(){return c})),e.d(n,"b",(function(){return u}));var r=e(35),c=function(t){if(!t)return{};var n=Object(r.a)({},t);return Object.keys(n).forEach((function(t){var e;e=n[t],[void 0,null,""].includes(e)&&delete n[t]})),n},u=function(){return window.location.href=window.location.origin}},164:function(t,n,e){"use strict";e.d(n,"a",(function(){return b})),e.d(n,"b",(function(){return j}));var r=e(18),c=e.n(r),u=e(35),a=e(108),o=e(45),i=e(208),s=e(75),f=e(78),d=e(0),l="http://localhost:2999",b=function(){var t=Object(o.a)(c.a.mark((function t(n){var e,r,f,d,b,j,O,p=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=p.length>1&&void 0!==p[1]?p[1]:{},r=e.data,f=void 0===r?{}:r,d=e.token,b=void 0===d?"":d,e.headers,j=Object(a.a)(e,["data","token","headers"]),"GET"===(O=Object(u.a)({method:"GET",headers:{Authorization:b?"Bearer ".concat(b):"","Content-Type":f?"application/json":""}},j)).method.toUpperCase()?n+="?".concat(i.stringify(f)):O.body=JSON.stringify(f),t.abrupt("return",window.fetch("".concat(l,"/").concat(n),O).then(function(){var t=Object(o.a)(c.a.mark((function t(n){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(401!==n.status){t.next=5;break}return t.next=3,s.c();case 3:return window.location.reload(),t.abrupt("return",Promise.reject({message:"\u8bf7\u91cd\u65b0\u767b\u5f55!"}));case 5:return t.next=7,n.json();case 7:if(e=t.sent,!n.ok){t.next=12;break}return t.abrupt("return",e);case 12:return t.abrupt("return",Promise.reject(e));case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),j=function(){var t=Object(f.b)().user;return Object(d.useCallback)((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var c=e[0],a=e[1];return b(c,Object(u.a)(Object(u.a)({},a),{},{token:null===t||void 0===t?void 0:t.token}))}),[null===t||void 0===t?void 0:t.token])}},232:function(t,n,e){},386:function(t,n,e){"use strict";e.r(n);var r=e(0),c=e.n(r),u=e(30),a=e.n(u),o=(e(232),e(78)),i=e(121),s=e(215),f=e(122),d=e(139),l=function(t){Object(f.a)(e,t);var n=Object(d.a)(e);function e(){var t;Object(i.a)(this,e);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(t=n.call.apply(n,[this].concat(c))).state={error:null},t}return Object(s.a)(e,[{key:"render",value:function(){var t=this.state.error,n=this.props,e=n.fallbackRender,r=n.children;return t?e({error:t}):r}}],[{key:"getDerivedStateFromError",value:function(t){return{error:t}}}]),e}(c.a.Component),b=e(95),j=e(23),O=c.a.lazy((function(){return e.e(9).then(e.bind(null,428))})),p=c.a.lazy((function(){return Promise.all([e.e(6),e.e(5)]).then(e.bind(null,429))}));var h=function(){var t=Object(o.b)().user;return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(l,{fallbackRender:b.c,children:Object(j.jsx)(c.a.Suspense,{fallback:Object(j.jsx)("div",{}),children:t?Object(j.jsx)(p,{}):Object(j.jsx)(O,{})})})})},v=function(t){t&&t instanceof Function&&e.e(13).then(e.bind(null,423)).then((function(n){var e=n.getCLS,r=n.getFID,c=n.getFCP,u=n.getLCP,a=n.getTTFB;e(t),r(t),c(t),u(t),a(t)}))},m=e(106),g=(e(385),e(393)),x=e(225),w=function(t){var n=t.children,e=new g.a({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});return Object(j.jsx)(x.a,{client:e,children:Object(j.jsx)(o.a,{children:n})})},y=e(35),k=e(108),E=e(47),S=[];function C(t){t.metadata;var n=t.phases,e=Object(k.a)(t,["metadata","phases"]);return Object(j.jsx)(r.Profiler,Object(y.a)({onRender:function(t,e,r,c,u,a,o){n&&!n.includes(e)||S.push({id:t,phase:e,actualDuration:r,baseDuration:c,startTime:u,commitTime:a,interactions:o})}},e))}setInterval((function(){if(S.length){var t=Object(E.a)(S);S=[],console.log(t)}}),5e3),Object(m.b)((function(){a.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsxs)(w,{children:[Object(j.jsx)(m.a,{}),Object(j.jsx)(C,{id:"root app",phases:["mount","update"],children:Object(j.jsx)(h,{})})]})}),document.getElementById("root"))})),v()},75:function(t,n,e){"use strict";e.d(n,"a",(function(){return i})),e.d(n,"b",(function(){return f})),e.d(n,"d",(function(){return d})),e.d(n,"c",(function(){return l}));var r=e(18),c=e.n(r),u=e(45),a="http://localhost:2999",o="__auth_provide_token__",i=function(){return window.localStorage.getItem(o)},s=function(t){var n,e=t.user;return n=e.token||"",window.localStorage.setItem(o,n),e},f=function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(a,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=8;break}return t.t0=s,t.next=4,n.json();case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:return t.t2=Promise,t.next=11,n.json();case 11:return t.t3=t.sent,t.abrupt("return",t.t2.reject.call(t.t2,t.t3));case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),d=function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(a,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=8;break}return t.t0=s,t.next=4,n.json();case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:return t.t2=Promise,t.next=11,n.json();case 11:return t.t3=t.sent,t.abrupt("return",t.t2.reject.call(t.t2,t.t3));case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),l=function(){var t=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.localStorage.removeItem(o));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},78:function(t,n,e){"use strict";e.d(n,"a",(function(){return p})),e.d(n,"b",(function(){return h}));var r=e(18),c=e.n(r),u=e(45),a=e(0),o=e.n(a),i=e(75),s=e(164),f=e(144),d=e(95),l=e(225),b=e(23),j=function(){var t=Object(u.a)(c.a.mark((function t(){var n,e,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,!(e=i.a())){t.next=7;break}return t.next=5,Object(s.a)("me",{token:e});case 5:r=t.sent,n=r.user;case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=o.a.createContext(void 0),p=function(t){var n=t.children,e=Object(f.a)(),r=e.data,c=e.error,u=e.isLoading,a=e.isIdle,o=e.isError,s=e.run,p=e.setData,h=Object(l.b)();return Object(f.d)((function(){s(j())})),a||u?Object(b.jsx)(d.d,{}):o?Object(b.jsx)(d.c,{error:c}):Object(b.jsx)(O.Provider,{children:n,value:{user:r,login:function(t){return i.b(t).then(p)},register:function(t){return i.d(t).then(p)},logout:function(){return i.c().then((function(){p(null),h.clear()}))}}})},h=function(){var t=o.a.useContext(O);if(!t)throw new Error("useAuth\u5fc5\u987b\u5728AuthProvider\u4e2d\u4f7f\u7528");return t}},95:function(t,n,e){"use strict";e.d(n,"e",(function(){return j})),e.d(n,"d",(function(){return p})),e.d(n,"c",(function(){return h})),e.d(n,"b",(function(){return v})),e.d(n,"a",(function(){return m})),e.d(n,"f",(function(){return g}));var r,c,u,a,o=e(96),i=e(97),s=e(160),f=e(387),d=e(146),l=e(106),b=e(23),j=i.a.div(r||(r=Object(o.a)(["\n  display: flex;\n  justify-content: ",";\n  align-items: center;\n  margin-bottom: ",";\n\n  & > * {\n    margin-top: 0;\n    margin-bottom: 0;\n    margin-right: ",";\n  }\n"])),(function(t){return t.between?"space-between":void 0}),(function(t){return t.marginBottom+"rem"}),(function(t){return"number"===typeof t.gap?t.gap+"rem":t.gap?"2rem":void 0})),O=i.a.div(c||(c=Object(o.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n"]))),p=function(){return Object(b.jsx)(O,{children:Object(b.jsx)(s.a,{size:"large"})})},h=function(t){var n=t.error;return Object(b.jsxs)(O,{children:[Object(b.jsx)(l.a,{}),Object(b.jsx)(v,{error:n})]})},v=function(t){var n,e=t.error;return(null===(n=e)||void 0===n?void 0:n.message)?Object(b.jsx)(f.a.Text,{type:"danger",children:null===e||void 0===e?void 0:e.message}):null},m=Object(i.a)(d.a)(u||(u=Object(o.a)(["\n  padding: 0;\n"]))),g=i.a.div(a||(a=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 3.2rem;\n"])))}},[[386,2,3]]]);
//# sourceMappingURL=main.6f6c19c5.chunk.js.map