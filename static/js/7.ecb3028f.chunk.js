(this.webpackJsonpjira=this.webpackJsonpjira||[]).push([[7],{424:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return h})),n.d(e,"g",(function(){return l})),n.d(e,"f",(function(){return b})),n.d(e,"e",(function(){return j}));var r=n(29),i=n(426),s=n(425),u=n(0),c=n(20),a=n(154),o=function(){var t,e=null===(t=Object(c.g)().pathname.match(/projects\/(\d+)/))||void 0===t?void 0:t[1];return Number(e)},d=function(){return Object(i.d)(o())},f=function(){return{projectId:o()}},h=function(){return["boards",f()]},l=function(){var t=Object(a.f)(["name","typeId","processorId","tagId"]),e=Object(r.a)(t,1)[0],n=o();return Object(u.useMemo)((function(){return{projectId:n,name:e.name,typeId:Number(e.typeId)||void 0,processorId:Number(e.processorId)||void 0,tagId:Number(e.tagId)||void 0}}),[n,e])},b=function(){return["tasks",l()]},j=function(){var t=Object(a.f)(["editingTaskId"]),e=Object(r.a)(t,2),n=e[0].editingTaskId,i=e[1],c=Object(s.e)(Number(n)),o=c.data,d=c.isLoading,f=Object(u.useCallback)((function(t){i({editingTaskId:t})}),[i]);return{editingTaskId:n,editingTask:o,isLoading:d,close:Object(u.useCallback)((function(){i({editingTaskId:""})}),[i]),edit:f}}},425:function(t,e,n){"use strict";n.d(e,"g",(function(){return o})),n.d(e,"e",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return l})),n.d(e,"f",(function(){return b})),n.d(e,"d",(function(){return j}));var r=n(35),i=n(174),s=n(100),u=n(175),c=n(154),a=n(428),o=function(t){var e=Object(i.b)(),n=Object(u.a)(Object(r.a)(Object(r.a)({},t),{},{name:Object(c.b)(null===t||void 0===t?void 0:t.name,200)}));return Object(s.useQuery)(["tasks",n],(function(){return e("tasks",{data:n})}))},d=function(t){var e=Object(i.b)();return Object(s.useQuery)(["tasks",{id:t}],(function(){return e("tasks/".concat(t))}),{enabled:!!t})},f=function(t){var e=Object(i.b)();return Object(s.useMutation)((function(t){return e("tasks",{data:t,method:"POST"})}),Object(a.a)(t))},h=function(t){var e=Object(i.b)();return Object(s.useMutation)((function(t){return e("tasks/".concat(t.id),{data:t,method:"PATCH"})}),Object(a.c)(t))},l=function(t){var e=Object(i.b)();return Object(s.useMutation)((function(t){var n=t.id;return e("tasks/".concat(n),{method:"DELETE"})}),Object(a.b)(t))},b=function(){var t=Object(i.b)();return Object(s.useQuery)(["taskTypes"],(function(){return t("taskTypes")}))},j=function(t){var e=Object(i.b)();return Object(s.useMutation)((function(t){return e("tasks/reorder",{data:t,method:"POST"})}),Object(a.e)(t))}},433:function(t,e,n){t.exports=function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",s="minute",u="hour",c="day",a="week",o="month",d="quarter",f="year",h="date",l="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,j=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,O={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,o),s=n-i<0,u=e.clone().add(r+(s?-1:1),o);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:o,y:f,w:a,d:c,D:h,h:u,m:s,s:i,ms:r,Q:d}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},$="en",p={};p[$]=O;var y=function(t){return t instanceof x},g=function(t,e,n){var r;if(!t)return $;if("string"==typeof t)p[t]&&(r=t),e&&(p[t]=e,r=t);else{var i=t.name;p[i]=t,r=i}return!n&&r&&($=r),r||!n&&$},M=function(t,e){if(y(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new x(n)},D=v;D.l=g,D.i=y,D.w=function(t,e){return M(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var x=function(){function O(t){this.$L=g(t.locale,null,!0),this.parse(t)}var m=O.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(D.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(b);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return D},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=M(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return M(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<M(t)},m.$g=function(t,e,n){return D.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!D.u(e)||e,d=D.p(t),l=function(t,e){var i=D.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(c)},b=function(t,e){return D.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},j=this.$W,O=this.$M,m=this.$D,v="set"+(this.$u?"UTC":"");switch(d){case f:return r?l(1,0):l(31,11);case o:return r?l(1,O):l(0,O+1);case a:var $=this.$locale().weekStart||0,p=(j<$?j+7:j)-$;return l(r?m-p:m+(6-p),O);case c:case h:return b(v+"Hours",0);case u:return b(v+"Minutes",1);case s:return b(v+"Seconds",2);case i:return b(v+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,a=D.p(t),d="set"+(this.$u?"UTC":""),l=(n={},n[c]=d+"Date",n[h]=d+"Date",n[o]=d+"Month",n[f]=d+"FullYear",n[u]=d+"Hours",n[s]=d+"Minutes",n[i]=d+"Seconds",n[r]=d+"Milliseconds",n)[a],b=a===c?this.$D+(e-this.$W):e;if(a===o||a===f){var j=this.clone().set(h,1);j.$d[l](b),j.init(),this.$d=j.set(h,Math.min(this.$D,j.daysInMonth())).$d}else l&&this.$d[l](b);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[D.p(t)]()},m.add=function(r,d){var h,l=this;r=Number(r);var b=D.p(d),j=function(t){var e=M(l);return D.w(e.date(e.date()+Math.round(t*r)),l)};if(b===o)return this.set(o,this.$M+r);if(b===f)return this.set(f,this.$y+r);if(b===c)return j(1);if(b===a)return j(7);var O=(h={},h[s]=e,h[u]=n,h[i]=t,h)[b]||1,m=this.$d.getTime()+r*O;return D.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this;if(!this.isValid())return l;var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=D.z(this),i=this.$locale(),s=this.$H,u=this.$m,c=this.$M,a=i.weekdays,o=i.months,d=function(t,r,i,s){return t&&(t[r]||t(e,n))||i[r].substr(0,s)},f=function(t){return D.s(s%12||12,t,"0")},h=i.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},b={YY:String(this.$y).slice(-2),YYYY:this.$y,M:c+1,MM:D.s(c+1,2,"0"),MMM:d(i.monthsShort,c,o,3),MMMM:d(o,c),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:d(i.weekdaysMin,this.$W,a,2),ddd:d(i.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(s),HH:D.s(s,2,"0"),h:f(1),hh:f(2),a:h(s,u,!0),A:h(s,u,!1),m:String(u),mm:D.s(u,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:r};return n.replace(j,(function(t,e){return e||b[t]||r.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,h,l){var b,j=D.p(h),O=M(r),m=(O.utcOffset()-this.utcOffset())*e,v=this-O,$=D.m(this,O);return $=(b={},b[f]=$/12,b[o]=$,b[d]=$/3,b[a]=(v-m)/6048e5,b[c]=(v-m)/864e5,b[u]=v/n,b[s]=v/e,b[i]=v/t,b)[j]||v,l?$:D.a($)},m.daysInMonth=function(){return this.endOf(o).$D},m.$locale=function(){return p[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=g(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return D.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},O}(),S=x.prototype;return M.prototype=S,[["$ms",r],["$s",i],["$m",s],["$H",u],["$W",c],["$M",o],["$y",f],["$D",h]].forEach((function(t){S[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),M.extend=function(t,e){return t.$i||(t(e,x,M),t.$i=!0),M},M.locale=g,M.isDayjs=y,M.unix=function(t){return M(1e3*t)},M.en=p[$],M.Ls=p,M.p={},M}()},448:function(t,e,n){"use strict";n.r(e);var r,i=n(29),s=n(0),u=n(433),c=n.n(u),a=n(174),o=n(100),d=n(175),f=n(428),h=n(425),l=n(424),b=function(){return{projectId:Object(l.c)()}},j=function(){return["epics",b()]},O=n(154),m=n(454),v=n(155),$=n(423),p=n(97),y=n(101),g=n(98),M=n(18),D=n.n(M),x=n(35),S=n(46),k=n(420),w=n(422),I=n(171),T=n(421),Y=n(99),_=n(24),C=function(t){var e=function(t){var e=Object(a.b)();return Object(o.useMutation)((function(t){return e("epics",{data:t,method:"POST"})}),Object(f.a)(t))}(j()),n=e.mutate,r=e.isLoading,u=e.error,c=k.a.useForm(),d=Object(i.a)(c,1)[0],h=Object(l.c)(),b=function(){var e=Object(S.a)(D.a.mark((function e(r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(Object(x.a)(Object(x.a)({},r),{},{projectId:h}));case 2:t.onClose();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){d.resetFields()}),[d,t.visible]),Object(_.jsx)(w.a,{visible:t.visible,onClose:t.onClose,forceRender:!0,destroyOnClose:!0,width:"100%",children:Object(_.jsx)(L,{children:r?Object(_.jsx)(I.a,{size:"large"}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h1",{children:"\u521b\u5efa\u4efb\u52a1\u7ec4"}),Object(_.jsx)(p.b,{error:u}),Object(_.jsxs)(k.a,{form:d,layout:"vertical",style:{width:"40rem"},onFinish:b,children:[Object(_.jsx)(k.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u7ec4\u540d"}],children:Object(_.jsx)(T.a,{placeholder:"\u8bf7\u8f93\u5165\u4efb\u52a1\u7ec4\u540d\u79f0"})}),Object(_.jsx)(k.a.Item,{style:{textAlign:"right"},children:Object(_.jsx)(v.a,{loading:r,type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})]})})})},L=Y.a.div(r||(r=Object(g.a)(["\n  height: 80vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])));e.default=function(){Object(O.c)("\u4efb\u52a1\u7ec4");var t=Object(l.d)().data,e=function(t){var e=Object(a.b)();return Object(o.useQuery)(["epics",Object(d.a)(t)],(function(){return e("epics",{data:t})}))}(b()).data,n=Object(h.g)({projectId:null===t||void 0===t?void 0:t.id}).data,r=function(t){var e=Object(a.b)();return Object(o.useMutation)((function(t){var n=t.id;return e("epics/".concat(n),{method:"DELETE"})}),Object(f.b)(t))}(j()).mutateAsync,u=Object(s.useState)(!1),g=Object(i.a)(u,2),M=g[0],D=g[1];return Object(_.jsxs)(p.f,{children:[Object(_.jsxs)(p.e,{between:!0,children:[Object(_.jsxs)("h1",{children:[null===t||void 0===t?void 0:t.name,"\u4efb\u52a1\u7ec4"]}),Object(_.jsx)(v.a,{type:"link",onClick:function(){return D(!0)},children:"\u65b0\u5efa\u4efb\u52a1\u7ec4"})]}),Object(_.jsx)($.b,{style:{overflow:"auto"},dataSource:e,itemLayout:"vertical",renderItem:function(e){return Object(_.jsxs)($.b.Item,{children:[Object(_.jsx)($.b.Item.Meta,{title:Object(_.jsxs)(p.e,{between:!0,children:[Object(_.jsx)("span",{children:e.name}),Object(_.jsx)(v.a,{danger:!0,type:"link",onClick:function(){return function(t){m.a.confirm({title:"\u786e\u5b9a\u5220\u9664".concat(t.name,"\u9879\u76ee\u7ec4"),okText:"\u786e\u5b9a",onOk:function(){r({id:t.id})}})}(e)},children:"\u5220\u9664"})]}),description:Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{children:["\u5f00\u59cb\u65f6\u95f4\uff1a",c()(e.start).format("YYYY-MM-DD")]}),Object(_.jsxs)("div",{children:["\u7ed3\u675f\u65f6\u95f4\uff1a",c()(e.end).format("YYYY-MM-DD")]})]})}),Object(_.jsx)("div",{children:null===n||void 0===n?void 0:n.filter((function(t){return t.epicId===e.id})).map((function(e){return Object(_.jsx)(y.b,{to:"/projects/".concat(null===t||void 0===t?void 0:t.id,"/board?editingTaskId=").concat(e.id),children:e.name},e.id)}))})]})}}),Object(_.jsx)(C,{visible:M,onClose:function(){return D(!1)}})]})}}}]);
//# sourceMappingURL=7.ecb3028f.chunk.js.map