(this.webpackJsonpjira=this.webpackJsonpjira||[]).push([[1],{154:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return l})),n.d(e,"f",(function(){return j})),n.d(e,"e",(function(){return O}));var r=n(35),c=(n(50),n(29)),u=n(0),a=n(101),i=n(175),o=function(t){Object(u.useEffect)((function(){t()}),[])},s=function(t,e){var n=Object(u.useState)(t),r=Object(c.a)(n,2),a=r[0],i=r[1];return Object(u.useEffect)((function(){var n=setTimeout((function(){return i(t)}),e);return function(){return clearTimeout(n)}}),[t,e]),a},f={stat:"idle",data:null,error:null},b={throwOnError:!1},d=function(t,e){var n=Object(r.a)(Object(r.a)({},b),e),a=Object(u.useReducer)((function(t,e){return Object(r.a)(Object(r.a)({},t),e)}),Object(r.a)(Object(r.a)({},f),t)),i=Object(c.a)(a,2),o=i[0],s=function(t){var e=p();return Object(u.useCallback)((function(){return e.current?t.apply(void 0,arguments):void 0}),[t,e])}(i[1]),d=Object(u.useState)((function(){return function(){}})),l=Object(c.a)(d,2),j=l[0],O=l[1],h=Object(u.useCallback)((function(t){return s({data:t,stat:"success",error:null})}),[s]),v=Object(u.useCallback)((function(t){return s({data:null,stat:"error",error:t})}),[s]),m=Object(u.useCallback)((function(t,e){if(!t||!t.then)throw new Error("\u8bf7\u4f20\u5165 Promise");return O((function(){return function(){(null===e||void 0===e?void 0:e.retry)&&m(e.retry(),e)}})),s({stat:"loading"}),t.then((function(t){return h(t),Promise.resolve(t)})).catch((function(t){return v(t),n.throwOnError?Promise.reject(t):t}))}),[n.throwOnError,h,v,s]);return Object(r.a)({isIdle:"idle"===o.stat,isLoading:"loading"===o.stat,isError:"error"===o.stat,isSuccess:"success"===o.stat,run:m,retry:j,setData:h,setError:v},o)},l=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(u.useRef)(document.title).current;Object(u.useEffect)((function(){document.title=t}),[t]),Object(u.useEffect)((function(){return function(){e||(document.title=n)}}),[n,e])},j=function(t){var e=Object(a.c)(),n=Object(c.a)(e,1)[0],r=O(),i=Object(u.useState)(t),o=Object(c.a)(i,1)[0];return[Object(u.useMemo)((function(){var t=Object.entries(Object.fromEntries(n)).filter((function(t){var e=Object(c.a)(t,1)[0];return o.includes(e)}));return Object.fromEntries(t)}),[n,o]),function(t){return r(t)}]},O=function(){var t=Object(a.c)(),e=Object(c.a)(t,2),n=e[0],u=e[1];return function(t){var e=Object(i.a)(Object(r.a)(Object(r.a)({},Object.fromEntries(n)),t));return u(e)}},p=function(){var t=Object(u.useRef)(!1);return Object(u.useEffect)((function(){return t.current=!0,function(){t.current=!1}})),t}},174:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return O}));var r=n(18),c=n.n(r),u=n(35),a=n(114),i=n(46),o=n(226),s=n(79),f=n(82),b=n(0),d=["data","token","headers"],l="https://riceecir.github.io",j=function(){var t=Object(i.a)(c.a.mark((function t(e){var n,r,f,b,j,O,p,h=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:{},r=n.data,f=void 0===r?{}:r,b=n.token,j=void 0===b?"":b,n.headers,O=Object(a.a)(n,d),"GET"===(p=Object(u.a)({method:"GET",headers:{Authorization:j?"Bearer ".concat(j):"","Content-Type":f?"application/json":""}},O)).method.toUpperCase()?e+="?".concat(o.stringify(f)):p.body=JSON.stringify(f),t.abrupt("return",window.fetch("".concat(l,"/").concat(e),p).then(function(){var t=Object(i.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(401!==e.status){t.next=5;break}return t.next=3,s.c();case 3:return window.location.reload(),t.abrupt("return",Promise.reject({message:"\u8bf7\u91cd\u65b0\u767b\u5f55!"}));case 5:return t.next=7,e.json();case 7:if(n=t.sent,!e.ok){t.next=12;break}return t.abrupt("return",n);case 12:return t.abrupt("return",Promise.reject(n));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(f.b)().user;return Object(b.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var c=n[0],a=n[1];return j(c,Object(u.a)(Object(u.a)({},a),{},{token:null===t||void 0===t?void 0:t.token}))}),[null===t||void 0===t?void 0:t.token])}},175:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(35),c=function(t){if(!t)return{};var e=Object(r.a)({},t);return Object.keys(e).forEach((function(t){var n;n=e[t],[void 0,null,""].includes(n)&&delete e[t]})),e}},254:function(t,e,n){},264:function(t,e){},414:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),u=n(31),a=n.n(u),i=(n(254),n(82)),o=n(129),s=n(233),f=n(130),b=n(149),d=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(t=e.call.apply(e,[this].concat(c))).state={error:null},t}return Object(s.a)(n,[{key:"render",value:function(){var t=this.state.error,e=this.props,n=e.fallbackRender,r=e.children;return t?n({error:t}):r}}],[{key:"getDerivedStateFromError",value:function(t){return{error:t}}}]),n}(c.a.Component),l=n(97),j=n(101),O=n(20),p=n(24),h=c.a.lazy((function(){return n.e(8).then(n.bind(null,456))})),v=c.a.lazy((function(){return Promise.all([n.e(9),n.e(5)]).then(n.bind(null,457))}));var m=function(){var t=Object(i.b)().user,e=Object(O.h)();return Object(r.useEffect)((function(){t||e("/login")}),[t,e]),t?Object(p.jsx)(v,{}):Object(p.jsx)(h,{})},g=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(d,{fallbackRender:l.c,children:Object(p.jsx)(c.a.Suspense,{fallback:Object(p.jsx)("div",{}),children:Object(p.jsx)(j.a,{children:Object(p.jsx)(m,{})})})})})},x=function(t){t&&t instanceof Function&&n.e(13).then(n.bind(null,451)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,u=e.getLCP,a=e.getTTFB;n(t),r(t),c(t),u(t),a(t)}))},w=n(148),y=(n(413),n(100)),k=function(t){var e=t.children,n=new y.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});return Object(p.jsx)(y.QueryClientProvider,{client:n,children:Object(p.jsx)(i.a,{children:e})})},E=n(35),C=n(114),P=n(50),S=["metadata","phases"],T=[];function I(t){t.metadata;var e=t.phases,n=Object(C.a)(t,S);return Object(p.jsx)(r.Profiler,Object(E.a)({onRender:function(t,n,r,c,u,a,i){e&&!e.includes(n)||T.push({id:t,phase:n,actualDuration:r,baseDuration:c,startTime:u,commitTime:a,interactions:i})}},n))}setInterval((function(){if(T.length){var t=Object(P.a)(T);T=[],console.log(t)}}),5e3),Object(w.b)((function(){a.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsxs)(k,{children:[!1,Object(p.jsx)(I,{id:"root app",phases:["mount","update"],children:Object(p.jsx)(g,{})})]})}),document.getElementById("root"))})),x()},79:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return f})),n.d(e,"d",(function(){return b})),n.d(e,"c",(function(){return d}));var r=n(18),c=n.n(r),u=n(46),a="https://riceecir.github.io",i="__auth_provide_token__",o=function(){return window.localStorage.getItem(i)},s=function(t){var e,n=t.user;return e=n.token||"",window.localStorage.setItem(i,e),n},f=function(){var t=Object(u.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(a,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(){var t=Object(u.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=8;break}return t.t0=s,t.next=4,e.json();case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:return t.t2=Promise,t.next=11,e.json();case 11:return t.t3=t.sent,t.abrupt("return",t.t2.reject.call(t.t2,t.t3));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(u.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(a,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(){var t=Object(u.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=8;break}return t.t0=s,t.next=4,e.json();case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:return t.t2=Promise,t.next=11,e.json();case 11:return t.t3=t.sent,t.abrupt("return",t.t2.reject.call(t.t2,t.t3));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.localStorage.removeItem(i));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},82:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return h}));var r=n(18),c=n.n(r),u=n(46),a=n(0),i=n.n(a),o=n(79),s=n(174),f=n(154),b=n(97),d=n(100),l=n(24),j=function(){var t=Object(u.a)(c.a.mark((function t(){var e,n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=null,!(n=o.a())){t.next=7;break}return t.next=5,Object(s.a)("me",{token:n});case 5:r=t.sent,e=r.user;case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=i.a.createContext(void 0),p=function(t){var e=t.children,n=Object(f.a)(),r=n.data,c=n.error,u=n.isLoading,a=n.isIdle,i=n.isError,s=n.run,p=n.setData,h=Object(d.useQueryClient)();return Object(f.d)((function(){s(j())})),a||u?Object(l.jsx)(b.d,{}):i?Object(l.jsx)(b.c,{error:c}):Object(l.jsx)(O.Provider,{children:e,value:{user:r,login:function(t){return o.b(t).then(p)},register:function(t){return o.d(t).then(p)},logout:function(){return o.c().then((function(){p(null),h.clear()}))}}})},h=function(){var t=i.a.useContext(O);if(!t)throw new Error("useAuth\u5fc5\u987b\u5728AuthProvider\u4e2d\u4f7f\u7528");return t}},97:function(t,e,n){"use strict";n.d(e,"e",(function(){return j})),n.d(e,"d",(function(){return p})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return m})),n.d(e,"f",(function(){return g}));var r,c,u,a,i=n(98),o=n(99),s=n(171),f=n(417),b=n(155),d=n(148),l=n(24),j=o.a.div(r||(r=Object(i.a)(["\n  display: flex;\n  justify-content: ",";\n  align-items: center;\n  margin-bottom: ",";\n\n  & > * {\n    margin-top: 0;\n    margin-bottom: 0;\n    margin-right: ",";\n  }\n"])),(function(t){return t.between?"space-between":void 0}),(function(t){return t.marginBottom+"rem"}),(function(t){return"number"===typeof t.gap?t.gap+"rem":t.gap?"2rem":void 0})),O=o.a.div(c||(c=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n"]))),p=function(){return Object(l.jsx)(O,{children:Object(l.jsx)(s.a,{size:"large"})})},h=function(t){var e=t.error;return Object(l.jsxs)(O,{children:[Object(l.jsx)(d.a,{}),Object(l.jsx)(v,{error:e})]})},v=function(t){var e,n=t.error;return(null===(e=n)||void 0===e?void 0:e.message)?Object(l.jsx)(f.a.Text,{type:"danger",children:null===n||void 0===n?void 0:n.message}):null},m=Object(o.a)(b.a)(u||(u=Object(i.a)(["\n  padding: 0;\n"]))),g=o.a.div(a||(a=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 3.2rem;\n"])))}},[[414,2,3]]]);
//# sourceMappingURL=main.fe630999.chunk.js.map