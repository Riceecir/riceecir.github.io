(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9440e20"],{"0738":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return s}));var _=a("b775"),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(_["e"])("/api/sys/log/page",_["a"].GET,e)},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(_["e"])("/api/persistence/mobile-operator-log/page",_["a"].GET,e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(_["e"])("/api/persistence/platform-operator-log/page",_["a"].GET,e)}},3521:function(e,t,a){"use strict";var _=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"standard-table"},[a("div",{staticClass:"alert"},[e.selectedRows?a("a-alert",{attrs:{type:"info","show-icon":!0}},[a("div",{staticClass:"message",attrs:{slot:"message"},slot:"message"},[e._v(" 已选择 "),a("a",[e._v(e._s(e.selectedRows.length))]),e._v(" 项 "),a("a",{staticClass:"clear",on:{click:e.onClear}},[e._v("清空")]),e._l(e.needTotalList,(function(t,_){return[t.needTotal?a("div",{key:_},[e._v(" "+e._s(t.title)+"总计  "),a("a",[e._v(e._s(t.customRender?t.customRender(t.total):t.total))])]):e._e()]}))],2)]):e._e()],1),a("a-table",{attrs:{bordered:e.bordered,loading:e.loading,columns:e.columns,dataSource:e.dataSource,rowKey:e.rowKey,pagination:e.transPagination,expandedRowKeys:e.expandedRowKeys,expandedRowRender:e.expandedRowRender,defaultExpandAllRows:e.defaultExpandAllRows,rowSelection:e.selectedRows?{selectedRowKeys:e.selectedRowKeys,onChange:e.updateSelect}:void 0},on:{change:e.onChange},scopedSlots:e._u([e._l(Object.keys(e.$scopedSlots).filter((function(e){return"expandedRowRender"!==e})),(function(t){return{key:t,fn:function(a,_,r){return[e._t(t,null,null,{text:a,record:_,index:r})]}}})),{key:e.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(t,a,_,r){return[e._t(e.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:t,index:a,indent:_,expanded:r})]}}],null,!0)},[e._l(Object.keys(e.$slots),(function(t){return a("template",{slot:t},[e._t(t)],2)}))],2)],1)},r=[],n=a("c1f7"),s=n["a"],o=(a("e34d"),a("2877")),l=Object(o["a"])(s,_,r,!1,null,"6857f466",null);t["a"]=l.exports},"3f12":function(e,t,a){"use strict";a("8b01")},"626f":function(e,t,a){"use strict";var _=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",placeholder:"操作模块"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}},e._l(e.options,(function(t){return a("a-select-option",{key:t.type,attrs:{value:t.value}},[e._v(" "+e._s(t.desc)+" ")])})),1)},r=[],n=(a("a9e3"),a("7ba5")),s={name:"title-select",props:{value:{type:[String,Number],default:""},options:{type:Array,default:function(){return n["b"]}}},watch:{value:{handler:function(e){e!==this.title&&(this.title=e)},immediate:!0},title:function(e){this.$emit("input",e)}},data:function(){return{title:""}}},o=s,l=a("2877"),i=Object(l["a"])(o,_,r,!1,null,null,null);t["a"]=i.exports},"6b75c":function(e,t,a){"use strict";var _=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",placeholder:"状态"},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}},e._l(e.options,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.desc)+" ")])})),1)},r=[],n=(a("a9e3"),{name:"status-select",props:{value:{type:[String,Number],default:""},options:{type:Array,default:function(){return[{value:0,desc:"成功"},{value:1,desc:"失败"}]}}},watch:{value:{handler:function(e){e!==this.state&&(this.state=e)},immediate:!0},state:function(e){this.$emit("input",e)}},data:function(){return{state:""}}}),s=n,o=a("2877"),l=Object(o["a"])(s,_,r,!1,null,null,null);t["a"]=l.exports},"7ba5":function(e,t,a){"use strict";a.d(t,"b",(function(){return _})),a.d(t,"a",(function(){return r}));var _=[{type:"user",desc:"用户管理",value:0},{type:"role",desc:"角色管理",value:1},{type:"dep",desc:"部门管理",value:2},{type:"post",desc:"职位管理",value:3},{type:"auth",desc:"权限管理",value:4},{type:"log",desc:"日志管理",value:5},{type:"config",desc:"配置管理",value:6},{type:"platform",desc:"第三方平台",value:7},{type:"sim",desc:"SIM卡管理",value:8},{type:"platform_interface",desc:"平台接口",value:9},{type:"home",desc:"主页管理",value:10}],r=[{desc:"所有",value:""},{desc:"新增",value:1},{desc:"修改",value:2},{desc:"删除",value:3},{desc:"授权",value:4},{desc:"上传",value:5},{desc:"导入",value:6},{desc:"导出",value:7},{desc:"清空数据",value:8},{desc:"其他",value:0}]},"8b01":function(e,t,a){},"9b27":function(e,t,a){},c1f7:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("53ca"),D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("5530"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6__);__webpack_exports__["a"]={name:"StandardTable",props:{bordered:Boolean,loading:[Boolean,Object],columns:Array,dataSource:Array,rowKey:{type:[String,Function],default:"key"},pagination:{type:[Object,Boolean],default:!0},selectedRows:Array,defaultExpandAllRows:Boolean,expandedRowKeys:Array,expandedRowRender:Function},data:function(){return{needTotalList:[]}},methods:{setQuery:function(e){this.$router.replace(Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])({},this.$route),{},{query:Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])({},this.$route.query),e)}))},updateSelect:function(e,t){this.$emit("update:selectedRows",t),this.$emit("selectedRowChange",e,t)},initTotalList:function(e){var t=e.filter((function(e){return e.needTotal})).map((function(e){return Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])({},e),{},{total:0})}));return t},onClear:function(){this.updateSelect([],[]),this.$emit("clear")},onChange:function(e,t,a,_){var r=_.currentDataSource,n=e.current,s=e.pageSize;this.setQuery({page:n,size:s}),this.$emit("change",e,t,a,{currentDataSource:r})}},created:function(){this.needTotalList=this.initTotalList(this.columns)},watch:{selectedRows:function selectedRows(_selectedRows){this.needTotalList=this.needTotalList.map((function(item){return Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])({},item),{},{total:_selectedRows.reduce((function(sum,val){var v;try{v=val[item.dataIndex]?val[item.dataIndex]:eval("val.".concat(item.dataIndex))}catch(_){v=val[item.dataIndex]}return v=isNaN(parseFloat(v))?0:parseFloat(v),sum+v}),0)})}))}},computed:{selectedRowKeys:function(){var e=this;return this.selectedRows.map((function(t){return"function"===typeof e.rowKey?e.rowKey(t):t[e.rowKey]}))},transPagination:function(){if("boolean"===typeof this.pagination)return this.pagination;if("object"===Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__["a"])(this.pagination)){var e=Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])({current:+this.pagination.page||1,pageSize:+this.pagination.size||10},this.pagination);return delete e.page,delete e.size,e}return{}}}}},d69e:function(e,t,a){"use strict";var _=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"日志详情"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("a-card",e._l(e.options,(function(t){var _=t.label,r=t.key;return a("a-row",{key:r},[a("a-col",{attrs:{span:6}},[e._v(e._s(_))]),a("a-col",{attrs:{span:18}},[e._v(e._s(e.row[r]))])],1)})),1)],1)},r=[],n=a("5530"),s={props:{row:{type:Object,default:function(){return{}}},value:{type:Boolean,default:!1},options:{type:Array,default:function(){return[{label:"IP",key:"operIp"},{label:"请求路径",key:"operUrl"},{label:"请求方式",key:"requestMethod"},{label:"处理方法",key:"method"},{label:"请求参数",key:"operParam"},{label:"错误消息",key:"errorMsg"},{label:"返回内容",key:"jsonResult"}]}}},watch:{value:function(e){var t=this;e&&"add"===this.type&&this.$nextTick((function(){return t.$refs.form.resetFields()})),this.$emit("input",e)},row:{handler:function(e){e&&"edit"===this.type&&(this.form=Object(n["a"])({},e))},deep:!0}}},o=s,l=a("2877"),i=Object(l["a"])(o,_,r,!1,null,null,null);t["a"]=i.exports},e34d:function(e,t,a){"use strict";a("9b27")},f657:function(e,t,a){"use strict";a.r(t);var _=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Query",{on:{query:e.query}}),a("a-divider"),a("List",{attrs:{loading:e.loading,list:e.list}})],1)},r=[],n=a("5530"),s=a("1da1"),o=(a("96cf"),a("9129"),a("a9e3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",[a("a-form-model",{ref:"form",attrs:{model:e.form,layout:"horizontal"}},[a("a-row",[a("a-col",{attrs:{md:4,sm:24}},[a("a-form-model-item",{attrs:{label:"操作类型",prop:"type",labelCol:{span:7},wrapperCol:{span:16,offset:1}}},[a("a-select",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[e._l(e.operatorTypes,(function(t){return[a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.desc))])]}))],2)],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-form-model-item",{attrs:{label:"操作模块",prop:"type",labelCol:{span:7},wrapperCol:{span:16,offset:1}}},[a("title-select",{attrs:{options:e.titleOptions},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-form-model-item",{attrs:{label:"操作状态",prop:"status",labelCol:{span:7},wrapperCol:{span:16,offset:1}}},[a("status-select",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1),a("a-col",{attrs:{md:4,sm:24,offset:1}},[a("a-space",{staticStyle:{"margin-top":"3px"},attrs:{align:"baseline",size:"middle"}},[a("a-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")]),a("a-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1)],1)}),l=[],i=(a("4de4"),a("d3b7"),a("ac1f"),a("5319"),a("626f")),u=a("6b75c"),c=a("7ba5"),d={components:{TitleSelect:i["a"],StatusSelect:u["a"]},data:function(){return{operatorTypes:c["a"],form:{type:"",status:"",title:""}}},watch:{"$route.query":{handler:function(e){var t=this;e&&this.$nextTick((function(){for(var a in t.form)a in e&&(t.form[a]=e[a]);e.type&&(t.form.type=+e.type),e.title&&(t.form.title=+e.title),e.status&&(t.form.status=+e.status)}))},deep:!0,immediate:!0}},computed:{titleOptions:function(){return c["b"].filter((function(e){return 9!==e.value}))}},methods:{setQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$router.replace(Object(n["a"])(Object(n["a"])({},this.$route),{},{query:Object(n["a"])(Object(n["a"])(Object(n["a"])({},this.$route.query),this.form),e)}))},query:function(){this.setQuery({page:1}),this.$emit("query")},reset:function(){this.$refs.form.resetFields()}}},p=d,m=a("2877"),f=Object(m["a"])(p,o,l,!1,null,null,null),b=f.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("standard-table",{attrs:{columns:e.columns,loading:e.loading,dataSource:e.list,pagination:e.pagination,"row-key":"logId"},scopedSlots:e._u([{key:"businessType",fn:function(t){var _=t.record;return[a("span",{class:{add:"add"===_.type,remove:"remove"===_.type}},[e._v(" "+e._s(e._f("type")(_.businessType))+" ")])]}},{key:"operatorType",fn:function(t){var _=t.record;return[a("span",[e._v(" "+e._s(e._f("operatorType")(_.operatorType))+" ")])]}},{key:"status",fn:function(t){var _=t.record;return[a("span",{class:"0"===_.status?"success":"fail"},[e._v(" "+e._s(e._f("status")(_.status))+" ")])]}},{key:"detail",fn:function(t){var _=t.record;return[a("a-button",{staticStyle:{"padding-left":"0"},attrs:{type:"link"},on:{click:function(t){return e.openDetail(_)}}},[e._v("详情")])]}}])}),a("Deatil",{attrs:{row:e.row},model:{value:e.showDetail,callback:function(t){e.showDetail=t},expression:"showDetail"}})],1)},v=[],h=(a("7db0"),a("3521")),g=a("d69e"),E=[{title:"用户",dataIndex:"operName"},{title:"用户类型",scopedSlots:{customRender:"operatorType"}},{title:"描述",width:"25%",dataIndex:"businessDesc"},{title:"操作类型",scopedSlots:{customRender:"businessType"}},{title:"时间",dataIndex:"operTime"},{title:"结果",scopedSlots:{customRender:"status"}},{title:"",scopedSlots:{customRender:"detail"}}],j={components:{StandardTable:h["a"],Deatil:g["a"]},props:{pagination:{type:Object,default:function(){return{}}},list:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},total:{type:Number,default:0}},data:function(){return{columns:E,row:{},showDetail:!1}},watch:{"$route.query":{handler:function(e){this.pagination.total=Number.isNaN(+e.total)?0:+e.total,this.pagination.current=Number.isNaN(+e.current)?0:+e.current,this.pagination.pageSize=Number.isNaN(+e.pageSize)?0:+e.pageSize},immediate:!0}},methods:{openDetail:function(e){this.row=e,this.showDetail=!0}},filters:{type:function(e){var t=c["a"].find((function(t){return t.value===e}));return(null===t||void 0===t?void 0:t.desc)||"未知操作"},status:function(e){return"1"===e?"失败":"0"===e?"成功":"未知"},operatorType:function(e){return 1===e?"后台用户":2===e?"手机端用户":"其他"}}},w=j,O=(a("3f12"),Object(m["a"])(w,y,v,!1,null,"c43f09b0",null)),D=O.exports,R=a("0738"),k=a("2ef0"),P=a.n(k),M={name:"white-list-log",components:{Query:b,List:D},data:function(){return{loading:!1,list:[],total:0,queryParams:{page:1,size:10}}},watch:{"$route.query":{handler:function(e){this.queryParams=this.handleQuery(e),this.query()},immediate:!0}},methods:{handleQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.page=Number.isNaN(+e.page)?1:+e.page,e.size=Number.isNaN(+e.size)?10:+e.size,e},query:P.a.debounce(Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,_,r,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:this.queryParams,this.loading=!0,e.prev=2,e.next=5,Object(R["a"])(Object(n["a"])({},t));case 5:_=e.sent,r=_.data,200===r.code&&(this.list=(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.record)||[]),e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](2);case 12:this.loading=!1;case 13:case"end":return e.stop()}}),e,this,[[2,10]])}))),150)}},T=M,x=Object(m["a"])(T,_,r,!1,null,null,null);t["default"]=x.exports}}]);