(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b5c2fd6"],{3521:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"standard-table"},[r("div",{staticClass:"alert"},[e.selectedRows?r("a-alert",{attrs:{type:"info","show-icon":!0}},[r("div",{staticClass:"message",attrs:{slot:"message"},slot:"message"},[e._v(" 已选择 "),r("a",[e._v(e._s(e.selectedRows.length))]),e._v(" 项 "),r("a",{staticClass:"clear",on:{click:e.onClear}},[e._v("清空")]),e._l(e.needTotalList,(function(t,a){return[t.needTotal?r("div",{key:a},[e._v(" "+e._s(t.title)+"总计  "),r("a",[e._v(e._s(t.customRender?t.customRender(t.total):t.total))])]):e._e()]}))],2)]):e._e()],1),r("a-table",{attrs:{bordered:e.bordered,loading:e.loading,columns:e.columns,dataSource:e.dataSource,rowKey:e.rowKey,pagination:e.transPagination,expandedRowKeys:e.expandedRowKeys,expandedRowRender:e.expandedRowRender,defaultExpandAllRows:e.defaultExpandAllRows,rowSelection:e.selectedRows?{selectedRowKeys:e.selectedRowKeys,onChange:e.updateSelect}:void 0},on:{change:e.onChange},scopedSlots:e._u([e._l(Object.keys(e.$scopedSlots).filter((function(e){return"expandedRowRender"!==e})),(function(t){return{key:t,fn:function(r,a,n){return[e._t(t,null,null,{text:r,record:a,index:n})]}}})),{key:e.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(t,r,a,n){return[e._t(e.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:t,index:r,indent:a,expanded:n})]}}],null,!0)},[e._l(Object.keys(e.$slots),(function(t){return r("template",{slot:t},[e._t(t)],2)}))],2)],1)},n=[],_=r("c1f7"),o=_["a"],s=(r("e34d"),r("2877")),i=Object(s["a"])(o,a,n,!1,null,"6857f466",null);t["a"]=i.exports},"7a53":function(e,t,r){"use strict";r.d(t,"e",(function(){return _})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return i}));var a=r("1da1"),n=(r("96cf"),r("b775")),_=function(){return Object(n["e"])("/api/sys/role/list",n["a"].GET,{})},o=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,a,_=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a in t=_.length>0&&void 0!==_[0]?_[0]:{},r=new FormData,t)r.append(a,t[a]);return e.abrupt("return",Object(n["e"])("/api/sys/role/add",n["a"].POST,r));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,a,_=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a in t=_.length>0&&void 0!==_[0]?_[0]:{},r=new FormData,t)r.append(a,t[a]);return e.abrupt("return",Object(n["e"])("/api/sys/role/edit",n["a"].PUT,r));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",Object(n["e"])("/api/sys/role/del",n["a"].DEL,t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},"9b27":function(e,t,r){},c1f7:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("53ca"),D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("5530"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_6__);__webpack_exports__["a"]={name:"StandardTable",props:{bordered:Boolean,loading:[Boolean,Object],columns:Array,dataSource:Array,rowKey:{type:[String,Function],default:"key"},pagination:{type:[Object,Boolean],default:!0},selectedRows:Array,defaultExpandAllRows:Boolean,expandedRowKeys:Array,expandedRowRender:Function},data:function(){return{needTotalList:[]}},methods:{setQuery:function(e){this.$router.replace(Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])({},this.$route),{},{query:Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])({},this.$route.query),e)}))},updateSelect:function(e,t){this.$emit("update:selectedRows",t),this.$emit("selectedRowChange",e,t)},initTotalList:function(e){var t=e.filter((function(e){return e.needTotal})).map((function(e){return Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])({},e),{},{total:0})}));return t},onClear:function(){this.updateSelect([],[]),this.$emit("clear")},onChange:function(e,t,r,a){var n=a.currentDataSource,_=e.current,o=e.pageSize;this.setQuery({page:_,size:o}),this.$emit("change",e,t,r,{currentDataSource:n})}},created:function(){this.needTotalList=this.initTotalList(this.columns)},watch:{selectedRows:function selectedRows(_selectedRows){this.needTotalList=this.needTotalList.map((function(item){return Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])({},item),{},{total:_selectedRows.reduce((function(sum,val){var v;try{v=val[item.dataIndex]?val[item.dataIndex]:eval("val.".concat(item.dataIndex))}catch(_){v=val[item.dataIndex]}return v=isNaN(parseFloat(v))?0:parseFloat(v),sum+v}),0)})}))}},computed:{selectedRowKeys:function(){var e=this;return this.selectedRows.map((function(t){return"function"===typeof e.rowKey?e.rowKey(t):t[e.rowKey]}))},transPagination:function(){if("boolean"===typeof this.pagination)return this.pagination;if("object"===Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_0__["a"])(this.pagination)){var e=Object(D_develop_outer_pack_item_sim_manage_by_antd_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__["a"])({current:+this.pagination.page||1,pageSize:+this.pagination.size||10},this.pagination);return delete e.page,delete e.size,e}return{}}}}},e34d:function(e,t,r){"use strict";r("9b27")},ec6a:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Query",{on:{query:e.query,add:e.toEdit}}),r("a-divider"),r("List",{attrs:{loading:e.loading,list:e.list},on:{query:e.query,edit:e.toEdit}}),r("Edit",{attrs:{row:e.row,type:e.type},on:{success:e.query},model:{value:e.edit,callback:function(t){e.edit=t},expression:"edit"}})],1)},n=[],_=r("1da1"),o=(r("96cf"),r("9129"),r("a9e3"),r("2ef0")),s=r.n(o),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",[r("a-form-model",{ref:"form",attrs:{model:e.form,layout:"horizontal"}},[r("a-row",[r("a-col",{attrs:{md:6,sm:24}},[r("a-form-model-item",{attrs:{label:"角色名称",prop:"account",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[r("a-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1)],1),r("a-col",{attrs:{md:4,sm:24,offset:1}},[r("a-space",{staticStyle:{"margin-top":"3px"},attrs:{align:"baseline",size:"middle"}},[r("a-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")]),r("a-button",{on:{click:e.toAdd}},[e._v("新增")])],1)],1)],1)],1)],1)},u=[],c={data:function(){return{form:{account:"",deptId:"",name:"",status:""}}},methods:{query:function(){this.$emit("query",this.form)},toAdd:function(){this.$emit("add","add")}}},l=c,d=r("2877"),m=Object(d["a"])(l,i,u,!1,null,null,null),p=m.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("standard-table",{attrs:{columns:e.columns,dataSource:e.list,pagination:e.pagination,rowKey:"platformId"},scopedSlots:e._u([{key:"status",fn:function(e){var t=e.record;return[r("a-switch",{attrs:{disabled:!0,defaultChecked:0===t.status}})]}},{key:"handle",fn:function(t){var a=t.record;return[r("a-space",{attrs:{size:"small"}},[r("a-button",{attrs:{size:"small",type:"link"},on:{click:function(t){return e.toEdit(a)}}},[e._v("编辑")]),r("a-popconfirm",{attrs:{title:"确定删除?"},on:{confirm:function(t){return e.remove(a)}}},[r("a-button",{staticClass:"danger-link",attrs:{size:"small",type:"link"}},[e._v("删除")])],1)],1)]}}])})],1)},b=[],h=r("5530"),v=r("3521"),y=r("7a53"),g=[{title:"角色权限标识",dataIndex:"roleKey"},{title:"角色名称",dataIndex:"name"},{title:"备注",dataIndex:"remark"},{title:"状态",scopedSlots:{customRender:"status"}},{title:"操作",scopedSlots:{customRender:"handle"}}],w={components:{StandardTable:v["a"]},props:{pagination:{type:Object,default:function(){return{}}},list:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},total:{type:Number,default:0}},data:function(){return{columns:g,edit:!1,type:"",row:{}}},methods:{remove:function(){var e=arguments,t=this;return Object(_["a"])(regeneratorRuntime.mark((function r(){var a,n,_,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{roleId:""},n=a.roleId,r.prev=1,r.next=4,Object(y["d"])({roleId:n});case 4:if(_=r.sent,o=_.data,200===o.code){r.next=8;break}return r.abrupt("return",t.$message.error(o.msg));case 8:t.$emit("query"),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](1),t.$message.error(r.t0);case 14:case"end":return r.stop()}}),r,null,[[1,11]])})))()},toEdit:function(e){this.$emit("edit","edit",Object(h["a"])({},e))},changeStatus:function(e,t){var r=this;return Object(_["a"])(regeneratorRuntime.mark((function a(){var n,_,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n=e.platformId,a.next=4,Object(y["changeStatus"])({platformId:n,status:t});case 4:if(_=a.sent,o=_.data,200===o.code){a.next=8;break}return a.abrupt("return",r.$message.error(o.msg));case 8:e.status=1,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),r.$message.error(a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()}}},E=w,j=Object(d["a"])(E,f,b,!1,null,null,null),O=j.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-modal",{attrs:{title:e._f("typeText")("$type用户",e.type)},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[r("a-card",[r("a-form-model",{ref:"form",attrs:{model:e.form,layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19,offset:1},rules:e.rules}},[r("a-form-model-item",{attrs:{label:"识别码",prop:"roleKey"}},[r("a-input",{attrs:{placeholder:"请输入识别码"},model:{value:e.form.roleKey,callback:function(t){e.$set(e.form,"roleKey",t)},expression:"form.roleKey"}})],1),r("a-form-model-item",{attrs:{label:"角色名称",prop:"name"}},[r("a-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[r("a-input",{attrs:{placeholder:"请输入备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),r("template",{slot:"footer"},[r("a-button",{key:"back",on:{click:function(t){return e.$emit("input",!1)}}},[e._v(" 取消 ")]),r("a-button",{key:"submit",attrs:{type:"primary",loading:e.loading},on:{click:e.submit}},[e._v(" 确认 ")])],1)],2)},k=[],x=(r("b0c0"),r("ac1f"),r("5319"),{name:"Edit",props:{row:{type:Object,default:function(){return{}}},type:{type:String,default:""},value:{type:Boolean,default:!1}},watch:{value:function(e){var t=this;e&&"add"===this.type&&this.$nextTick((function(){return t.$refs.form.resetFields()})),this.$emit("input",e)},row:{handler:function(e){var t=this;e&&"edit"===this.type&&this.$nextTick((function(){return t.form=Object(h["a"])({},e)}))},deep:!0}},data:function(){return{loading:!1,form:{name:"",roleKey:"",remark:""},rules:{name:[{required:!0,message:"角色名称不能为空",trigger:"blur"}],roleKey:[{required:!0,message:"角色权限识别码不能为空",trigger:"blur"}]}}},methods:{submit:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:"add"===e.type?e.toAdd():"edit"===e.type&&e.toEdit(),t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()},toAdd:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Object(y["a"])(e.form);case 4:r=t.sent,a=r.data,200===a.code?(e.$emit("input",!1),e.$emit("success")):e.$message.error(a.msg),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](1);case 11:e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},toEdit:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var r,a,n,_,o,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,r=e.form,a=r.roleId,n=r.name,_=r.roleKey,o=r.remark,t.next=5,Object(y["b"])({roleId:a,name:n,roleKey:_,remark:o});case 5:s=t.sent,i=s.data,200===i.code?(e.$emit("input",!1),e.$emit("success")):e.$message.error(i.msg),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](1);case 12:e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},reset:function(){this.$refs.form.resetFields()}},filters:{typeText:function(e,t){return e.replace(/\$type/,{add:"新增",remove:"删除",edit:"编辑"}[t]||"")}}}),D=x,P=Object(d["a"])(D,R,k,!1,null,null,null),M=P.exports,K={name:"white-list",components:{Query:p,List:O,Edit:M},data:function(){return{edit:!1,type:"edit",row:{},loading:!1,list:[]}},watch:{"$route.query":{handler:function(e){this.handleQuery(e),this.query()},immediate:!0}},methods:{handleQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.page=Number.isNaN(+e.page)?0:+e.page,e.size=Number.isNaN(+e.size)?0:+e.size,e},toEdit:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.edit=!0,this.type=e,this.row=t},query:s.a.debounce(Object(_["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,Object(y["e"])();case 4:t=e.sent,r=t.data,200===r.code&&(this.list=(null===r||void 0===r?void 0:r.data)||[]),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](1);case 11:this.loading=!1;case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),150)}},T=K,$=Object(d["a"])(T,a,n,!1,null,null,null);t["default"]=$.exports}}]);